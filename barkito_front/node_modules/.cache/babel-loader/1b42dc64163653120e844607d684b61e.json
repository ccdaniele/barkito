{"ast":null,"code":"'use strict';\n\nconst {\n  executionAsyncId\n} = require('async_hooks');\n\nconst AsyncResourceStorage = require('./async_resource');\n\nclass AsyncHooksStorage extends AsyncResourceStorage {\n  constructor() {\n    super();\n    this._resources = new Map();\n  }\n\n  disable() {\n    super.disable();\n\n    this._resources.clear();\n  }\n\n  _createHook() {\n    return { ...super._createHook(),\n      destroy: this._destroy.bind(this)\n    };\n  }\n\n  _init(asyncId, type, triggerAsyncId, resource) {\n    super._init.apply(this, arguments);\n\n    this._resources.set(asyncId, resource);\n  }\n\n  _destroy(asyncId) {\n    this._resources.delete(asyncId);\n  }\n\n  _executionAsyncResource() {\n    const asyncId = executionAsyncId();\n\n    let resource = this._resources.get(asyncId);\n\n    if (!resource) {\n      this._resources.set(asyncId, resource = {});\n    }\n\n    return resource;\n  }\n\n}\n\nmodule.exports = AsyncHooksStorage;","map":{"version":3,"names":["executionAsyncId","require","AsyncResourceStorage","AsyncHooksStorage","constructor","_resources","Map","disable","clear","_createHook","destroy","_destroy","bind","_init","asyncId","type","triggerAsyncId","resource","apply","arguments","set","delete","_executionAsyncResource","get","module","exports"],"sources":["/Users/daniel.calderon/Projects/barkito/barkito_front/node_modules/dd-trace/packages/datadog-core/src/storage/async_hooks.js"],"sourcesContent":["'use strict'\n\nconst { executionAsyncId } = require('async_hooks')\nconst AsyncResourceStorage = require('./async_resource')\n\nclass AsyncHooksStorage extends AsyncResourceStorage {\n  constructor () {\n    super()\n\n    this._resources = new Map()\n  }\n\n  disable () {\n    super.disable()\n\n    this._resources.clear()\n  }\n\n  _createHook () {\n    return {\n      ...super._createHook(),\n      destroy: this._destroy.bind(this)\n    }\n  }\n\n  _init (asyncId, type, triggerAsyncId, resource) {\n    super._init.apply(this, arguments)\n\n    this._resources.set(asyncId, resource)\n  }\n\n  _destroy (asyncId) {\n    this._resources.delete(asyncId)\n  }\n\n  _executionAsyncResource () {\n    const asyncId = executionAsyncId()\n\n    let resource = this._resources.get(asyncId)\n\n    if (!resource) {\n      this._resources.set(asyncId, resource = {})\n    }\n\n    return resource\n  }\n}\n\nmodule.exports = AsyncHooksStorage\n"],"mappings":"AAAA;;AAEA,MAAM;EAAEA;AAAF,IAAuBC,OAAO,CAAC,aAAD,CAApC;;AACA,MAAMC,oBAAoB,GAAGD,OAAO,CAAC,kBAAD,CAApC;;AAEA,MAAME,iBAAN,SAAgCD,oBAAhC,CAAqD;EACnDE,WAAW,GAAI;IACb;IAEA,KAAKC,UAAL,GAAkB,IAAIC,GAAJ,EAAlB;EACD;;EAEDC,OAAO,GAAI;IACT,MAAMA,OAAN;;IAEA,KAAKF,UAAL,CAAgBG,KAAhB;EACD;;EAEDC,WAAW,GAAI;IACb,OAAO,EACL,GAAG,MAAMA,WAAN,EADE;MAELC,OAAO,EAAE,KAAKC,QAAL,CAAcC,IAAd,CAAmB,IAAnB;IAFJ,CAAP;EAID;;EAEDC,KAAK,CAAEC,OAAF,EAAWC,IAAX,EAAiBC,cAAjB,EAAiCC,QAAjC,EAA2C;IAC9C,MAAMJ,KAAN,CAAYK,KAAZ,CAAkB,IAAlB,EAAwBC,SAAxB;;IAEA,KAAKd,UAAL,CAAgBe,GAAhB,CAAoBN,OAApB,EAA6BG,QAA7B;EACD;;EAEDN,QAAQ,CAAEG,OAAF,EAAW;IACjB,KAAKT,UAAL,CAAgBgB,MAAhB,CAAuBP,OAAvB;EACD;;EAEDQ,uBAAuB,GAAI;IACzB,MAAMR,OAAO,GAAGd,gBAAgB,EAAhC;;IAEA,IAAIiB,QAAQ,GAAG,KAAKZ,UAAL,CAAgBkB,GAAhB,CAAoBT,OAApB,CAAf;;IAEA,IAAI,CAACG,QAAL,EAAe;MACb,KAAKZ,UAAL,CAAgBe,GAAhB,CAAoBN,OAApB,EAA6BG,QAAQ,GAAG,EAAxC;IACD;;IAED,OAAOA,QAAP;EACD;;AAxCkD;;AA2CrDO,MAAM,CAACC,OAAP,GAAiBtB,iBAAjB"},"metadata":{},"sourceType":"script"}