{"ast":null,"code":"'use strict';\n\nconst DatabasePlugin = require('../../dd-trace/src/plugins/database');\n\nclass TediousPlugin extends DatabasePlugin {\n  static get name() {\n    return 'tedious';\n  }\n\n  static get operation() {\n    return 'request';\n  } // TODO: change to match other database plugins\n\n\n  static get system() {\n    return 'mssql';\n  }\n\n  start(_ref) {\n    let {\n      queryOrProcedure,\n      connectionConfig\n    } = _ref;\n    this.startSpan('tedious.request', {\n      service: this.config.service,\n      resource: queryOrProcedure,\n      type: 'sql',\n      kind: 'client',\n      meta: {\n        'db.type': 'mssql',\n        'component': 'tedious',\n        'out.host': connectionConfig.server,\n        'out.port': connectionConfig.options.port,\n        'db.user': connectionConfig.userName || connectionConfig.authentication.options.userName,\n        'db.name': connectionConfig.options.database,\n        'db.instance': connectionConfig.options.instanceName\n      }\n    });\n  }\n\n}\n\nmodule.exports = TediousPlugin;","map":{"version":3,"names":["DatabasePlugin","require","TediousPlugin","name","operation","system","start","queryOrProcedure","connectionConfig","startSpan","service","config","resource","type","kind","meta","server","options","port","userName","authentication","database","instanceName","module","exports"],"sources":["/Users/daniel.calderon/Projects/barkito/barkito_front/node_modules/dd-trace/packages/datadog-plugin-tedious/src/index.js"],"sourcesContent":["'use strict'\n\nconst DatabasePlugin = require('../../dd-trace/src/plugins/database')\n\nclass TediousPlugin extends DatabasePlugin {\n  static get name () { return 'tedious' }\n  static get operation () { return 'request' } // TODO: change to match other database plugins\n  static get system () { return 'mssql' }\n\n  start ({ queryOrProcedure, connectionConfig }) {\n    this.startSpan('tedious.request', {\n      service: this.config.service,\n      resource: queryOrProcedure,\n      type: 'sql',\n      kind: 'client',\n      meta: {\n        'db.type': 'mssql',\n        'component': 'tedious',\n        'out.host': connectionConfig.server,\n        'out.port': connectionConfig.options.port,\n        'db.user': connectionConfig.userName || connectionConfig.authentication.options.userName,\n        'db.name': connectionConfig.options.database,\n        'db.instance': connectionConfig.options.instanceName\n      }\n    })\n  }\n}\n\nmodule.exports = TediousPlugin\n"],"mappings":"AAAA;;AAEA,MAAMA,cAAc,GAAGC,OAAO,CAAC,qCAAD,CAA9B;;AAEA,MAAMC,aAAN,SAA4BF,cAA5B,CAA2C;EAC1B,WAAJG,IAAI,GAAI;IAAE,OAAO,SAAP;EAAkB;;EACnB,WAATC,SAAS,GAAI;IAAE,OAAO,SAAP;EAAkB,CAFH,CAEI;;;EAC5B,WAANC,MAAM,GAAI;IAAE,OAAO,OAAP;EAAgB;;EAEvCC,KAAK,OAA0C;IAAA,IAAxC;MAAEC,gBAAF;MAAoBC;IAApB,CAAwC;IAC7C,KAAKC,SAAL,CAAe,iBAAf,EAAkC;MAChCC,OAAO,EAAE,KAAKC,MAAL,CAAYD,OADW;MAEhCE,QAAQ,EAAEL,gBAFsB;MAGhCM,IAAI,EAAE,KAH0B;MAIhCC,IAAI,EAAE,QAJ0B;MAKhCC,IAAI,EAAE;QACJ,WAAW,OADP;QAEJ,aAAa,SAFT;QAGJ,YAAYP,gBAAgB,CAACQ,MAHzB;QAIJ,YAAYR,gBAAgB,CAACS,OAAjB,CAAyBC,IAJjC;QAKJ,WAAWV,gBAAgB,CAACW,QAAjB,IAA6BX,gBAAgB,CAACY,cAAjB,CAAgCH,OAAhC,CAAwCE,QAL5E;QAMJ,WAAWX,gBAAgB,CAACS,OAAjB,CAAyBI,QANhC;QAOJ,eAAeb,gBAAgB,CAACS,OAAjB,CAAyBK;MAPpC;IAL0B,CAAlC;EAeD;;AArBwC;;AAwB3CC,MAAM,CAACC,OAAP,GAAiBtB,aAAjB"},"metadata":{},"sourceType":"script"}