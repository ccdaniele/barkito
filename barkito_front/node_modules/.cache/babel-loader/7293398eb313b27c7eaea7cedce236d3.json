{"ast":null,"code":"'use strict';\n\nconst BaseAwsSdkPlugin = require('../base');\n\nclass DynamoDb extends BaseAwsSdkPlugin {\n  generateTags(params, operation, response) {\n    const tags = {};\n\n    if (params) {\n      if (params.TableName) {\n        Object.assign(tags, {\n          'resource.name': `${operation} ${params.TableName}`,\n          'aws.dynamodb.table_name': params.TableName\n        });\n      } // batch operations have different format, collect table name for batch\n      // https://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/DynamoDB.html#batchGetItem-property`\n      // dynamoDB batch TableName\n\n\n      if (params.RequestItems) {\n        if (typeof params.RequestItems === 'object') {\n          if (Object.keys(params.RequestItems).length === 1) {\n            const tableName = Object.keys(params.RequestItems)[0]; // also add span type to match serverless convention\n\n            Object.assign(tags, {\n              'resource.name': `${operation} ${tableName}`,\n              'aws.dynamodb.table_name': tableName\n            });\n          }\n        }\n      } // TODO: DynamoDB.DocumentClient does batches on multiple tables\n      // https://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/DynamoDB/DocumentClient.html#batchGet-property\n      // it may be useful to have a different resource naming convention here to show all table names\n\n    } // also add span type to match serverless convention\n\n\n    Object.assign(tags, {\n      'span.type': 'dynamodb'\n    });\n    return tags;\n  }\n\n}\n\nmodule.exports = DynamoDb;","map":{"version":3,"names":["BaseAwsSdkPlugin","require","DynamoDb","generateTags","params","operation","response","tags","TableName","Object","assign","RequestItems","keys","length","tableName","module","exports"],"sources":["/Users/daniel.calderon/Projects/barkito/barkito_front/node_modules/dd-trace/packages/datadog-plugin-aws-sdk/src/services/dynamodb.js"],"sourcesContent":["'use strict'\n\nconst BaseAwsSdkPlugin = require('../base')\n\nclass DynamoDb extends BaseAwsSdkPlugin {\n  generateTags (params, operation, response) {\n    const tags = {}\n\n    if (params) {\n      if (params.TableName) {\n        Object.assign(tags, {\n          'resource.name': `${operation} ${params.TableName}`,\n          'aws.dynamodb.table_name': params.TableName\n        })\n      }\n\n      // batch operations have different format, collect table name for batch\n      // https://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/DynamoDB.html#batchGetItem-property`\n      // dynamoDB batch TableName\n      if (params.RequestItems) {\n        if (typeof params.RequestItems === 'object') {\n          if (Object.keys(params.RequestItems).length === 1) {\n            const tableName = Object.keys(params.RequestItems)[0]\n\n            // also add span type to match serverless convention\n            Object.assign(tags, {\n              'resource.name': `${operation} ${tableName}`,\n              'aws.dynamodb.table_name': tableName\n            })\n          }\n        }\n      }\n\n      // TODO: DynamoDB.DocumentClient does batches on multiple tables\n      // https://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/DynamoDB/DocumentClient.html#batchGet-property\n      // it may be useful to have a different resource naming convention here to show all table names\n    }\n\n    // also add span type to match serverless convention\n    Object.assign(tags, {\n      'span.type': 'dynamodb'\n    })\n\n    return tags\n  }\n}\n\nmodule.exports = DynamoDb\n"],"mappings":"AAAA;;AAEA,MAAMA,gBAAgB,GAAGC,OAAO,CAAC,SAAD,CAAhC;;AAEA,MAAMC,QAAN,SAAuBF,gBAAvB,CAAwC;EACtCG,YAAY,CAAEC,MAAF,EAAUC,SAAV,EAAqBC,QAArB,EAA+B;IACzC,MAAMC,IAAI,GAAG,EAAb;;IAEA,IAAIH,MAAJ,EAAY;MACV,IAAIA,MAAM,CAACI,SAAX,EAAsB;QACpBC,MAAM,CAACC,MAAP,CAAcH,IAAd,EAAoB;UAClB,iBAAkB,GAAEF,SAAU,IAAGD,MAAM,CAACI,SAAU,EADhC;UAElB,2BAA2BJ,MAAM,CAACI;QAFhB,CAApB;MAID,CANS,CAQV;MACA;MACA;;;MACA,IAAIJ,MAAM,CAACO,YAAX,EAAyB;QACvB,IAAI,OAAOP,MAAM,CAACO,YAAd,KAA+B,QAAnC,EAA6C;UAC3C,IAAIF,MAAM,CAACG,IAAP,CAAYR,MAAM,CAACO,YAAnB,EAAiCE,MAAjC,KAA4C,CAAhD,EAAmD;YACjD,MAAMC,SAAS,GAAGL,MAAM,CAACG,IAAP,CAAYR,MAAM,CAACO,YAAnB,EAAiC,CAAjC,CAAlB,CADiD,CAGjD;;YACAF,MAAM,CAACC,MAAP,CAAcH,IAAd,EAAoB;cAClB,iBAAkB,GAAEF,SAAU,IAAGS,SAAU,EADzB;cAElB,2BAA2BA;YAFT,CAApB;UAID;QACF;MACF,CAvBS,CAyBV;MACA;MACA;;IACD,CA/BwC,CAiCzC;;;IACAL,MAAM,CAACC,MAAP,CAAcH,IAAd,EAAoB;MAClB,aAAa;IADK,CAApB;IAIA,OAAOA,IAAP;EACD;;AAxCqC;;AA2CxCQ,MAAM,CAACC,OAAP,GAAiBd,QAAjB"},"metadata":{},"sourceType":"script"}