{"ast":null,"code":"'use strict';\n\nconst {\n  storage\n} = require('../../datadog-core');\n\nconst _default = {\n  debug: msg => console.debug(msg),\n\n  /* eslint-disable-line no-console */\n  info: msg => console.info(msg),\n\n  /* eslint-disable-line no-console */\n  warn: msg => console.warn(msg),\n\n  /* eslint-disable-line no-console */\n  error: msg => console.error(msg)\n  /* eslint-disable-line no-console */\n\n}; // based on: https://github.com/trentm/node-bunyan#levels\n\nconst _logLevels = {\n  'debug': 20,\n  'info': 30,\n  'warn': 40,\n  'error': 50\n};\nconst _defaultLogLevel = 'debug';\n\nconst _checkLogLevel = logLevel => {\n  if (logLevel && typeof logLevel === 'string') {\n    return _logLevels[logLevel.toLowerCase().trim()] || _logLevels[_defaultLogLevel];\n  }\n\n  return _logLevels[_defaultLogLevel];\n};\n\nconst memoize = func => {\n  const cache = {};\n\n  const memoized = function (key) {\n    if (!cache[key]) {\n      cache[key] = func.apply(this, arguments);\n    }\n\n    return cache[key];\n  };\n\n  return memoized;\n};\n\nfunction processMsg(msg) {\n  return typeof msg === 'function' ? msg() : msg;\n}\n\nfunction withNoop(fn) {\n  const store = storage.getStore();\n  storage.enterWith({\n    noop: true\n  });\n  fn();\n  storage.enterWith(store);\n}\n\nconst log = {\n  _isLogLevelEnabled(level) {\n    return _logLevels[level] >= this._logLevel;\n  },\n\n  use(logger) {\n    if (logger && logger.debug instanceof Function && logger.error instanceof Function) {\n      this._logger = logger;\n    }\n\n    return this;\n  },\n\n  toggle(enabled, logLevel, tracer) {\n    this._enabled = enabled;\n    this._logLevel = _checkLogLevel(logLevel);\n    this._tracer = tracer;\n    return this;\n  },\n\n  reset() {\n    this._logger = _default;\n    this._enabled = false;\n    this._deprecate = memoize((code, message) => {\n      withNoop(() => this._logger.error(message));\n      return this;\n    });\n    this._logLevel = _checkLogLevel();\n    return this;\n  },\n\n  debug(message) {\n    if (this._enabled && this._isLogLevelEnabled('debug')) {\n      withNoop(() => this._logger.debug(processMsg(message)));\n    }\n\n    return this;\n  },\n\n  info(message) {\n    if (!this._logger.info) return this.debug(message);\n\n    if (this._enabled && this._isLogLevelEnabled('info')) {\n      withNoop(() => this._logger.info(processMsg(message)));\n    }\n\n    return this;\n  },\n\n  warn(message) {\n    if (!this._logger.warn) return this.debug(message);\n\n    if (this._enabled && this._isLogLevelEnabled('warn')) {\n      withNoop(() => this._logger.warn(processMsg(message)));\n    }\n\n    return this;\n  },\n\n  error(err) {\n    if (this._enabled && this._isLogLevelEnabled('error')) {\n      if (err instanceof Function) {\n        err = err();\n      }\n\n      if (typeof err !== 'object' || !err) {\n        err = String(err);\n      } else if (!err.stack) {\n        err = String(err.message || err);\n      }\n\n      if (typeof err === 'string') {\n        err = new Error(err);\n      }\n\n      withNoop(() => this._logger.error(err));\n    }\n\n    return this;\n  },\n\n  deprecate(code, message) {\n    return this._deprecate(code, message);\n  }\n\n};\nlog.reset();\nmodule.exports = log;","map":{"version":3,"names":["storage","require","_default","debug","msg","console","info","warn","error","_logLevels","_defaultLogLevel","_checkLogLevel","logLevel","toLowerCase","trim","memoize","func","cache","memoized","key","apply","arguments","processMsg","withNoop","fn","store","getStore","enterWith","noop","log","_isLogLevelEnabled","level","_logLevel","use","logger","Function","_logger","toggle","enabled","tracer","_enabled","_tracer","reset","_deprecate","code","message","err","String","stack","Error","deprecate","module","exports"],"sources":["/Users/daniel.calderon/Projects/barkito/barkito_front/node_modules/dd-trace/packages/dd-trace/src/log.js"],"sourcesContent":["'use strict'\n\nconst { storage } = require('../../datadog-core')\n\nconst _default = {\n  debug: msg => console.debug(msg), /* eslint-disable-line no-console */\n  info: msg => console.info(msg), /* eslint-disable-line no-console */\n  warn: msg => console.warn(msg), /* eslint-disable-line no-console */\n  error: msg => console.error(msg) /* eslint-disable-line no-console */\n}\n\n// based on: https://github.com/trentm/node-bunyan#levels\nconst _logLevels = {\n  'debug': 20,\n  'info': 30,\n  'warn': 40,\n  'error': 50\n}\n\nconst _defaultLogLevel = 'debug'\n\nconst _checkLogLevel = (logLevel) => {\n  if (logLevel && typeof logLevel === 'string') {\n    return _logLevels[logLevel.toLowerCase().trim()] || _logLevels[_defaultLogLevel]\n  }\n\n  return _logLevels[_defaultLogLevel]\n}\n\nconst memoize = func => {\n  const cache = {}\n  const memoized = function (key) {\n    if (!cache[key]) {\n      cache[key] = func.apply(this, arguments)\n    }\n\n    return cache[key]\n  }\n\n  return memoized\n}\n\nfunction processMsg (msg) {\n  return typeof msg === 'function' ? msg() : msg\n}\n\nfunction withNoop (fn) {\n  const store = storage.getStore()\n\n  storage.enterWith({ noop: true })\n  fn()\n  storage.enterWith(store)\n}\n\nconst log = {\n  _isLogLevelEnabled (level) {\n    return _logLevels[level] >= this._logLevel\n  },\n\n  use (logger) {\n    if (logger && logger.debug instanceof Function && logger.error instanceof Function) {\n      this._logger = logger\n    }\n\n    return this\n  },\n\n  toggle (enabled, logLevel, tracer) {\n    this._enabled = enabled\n    this._logLevel = _checkLogLevel(logLevel)\n    this._tracer = tracer\n\n    return this\n  },\n\n  reset () {\n    this._logger = _default\n    this._enabled = false\n    this._deprecate = memoize((code, message) => {\n      withNoop(() => this._logger.error(message))\n      return this\n    })\n    this._logLevel = _checkLogLevel()\n\n    return this\n  },\n\n  debug (message) {\n    if (this._enabled && this._isLogLevelEnabled('debug')) {\n      withNoop(() => this._logger.debug(processMsg(message)))\n    }\n\n    return this\n  },\n\n  info (message) {\n    if (!this._logger.info) return this.debug(message)\n    if (this._enabled && this._isLogLevelEnabled('info')) {\n      withNoop(() => this._logger.info(processMsg(message)))\n    }\n\n    return this\n  },\n\n  warn (message) {\n    if (!this._logger.warn) return this.debug(message)\n    if (this._enabled && this._isLogLevelEnabled('warn')) {\n      withNoop(() => this._logger.warn(processMsg(message)))\n    }\n\n    return this\n  },\n\n  error (err) {\n    if (this._enabled && this._isLogLevelEnabled('error')) {\n      if (err instanceof Function) {\n        err = err()\n      }\n\n      if (typeof err !== 'object' || !err) {\n        err = String(err)\n      } else if (!err.stack) {\n        err = String(err.message || err)\n      }\n\n      if (typeof err === 'string') {\n        err = new Error(err)\n      }\n\n      withNoop(() => this._logger.error(err))\n    }\n\n    return this\n  },\n\n  deprecate (code, message) {\n    return this._deprecate(code, message)\n  }\n}\n\nlog.reset()\n\nmodule.exports = log\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}