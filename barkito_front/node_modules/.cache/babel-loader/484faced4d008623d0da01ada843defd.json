{"ast":null,"code":"// Unless explicitly stated otherwise all files in this repository are licensed under the Apache 2.0 License.\n//\n// This product includes software developed at Datadog (https://www.datadoghq.com/). Copyright 2021 Datadog, Inc.\nconst path = require('path');\n\nconst parse = require('module-details-from-path');\n\nconst {\n  fileURLToPath\n} = require('url');\n\nconst {\n  importHooks,\n  specifiers,\n  toHook\n} = require('./lib/register');\n\nfunction addHook(hook) {\n  importHooks.push(hook);\n  toHook.forEach(_ref => {\n    let [name, namespace] = _ref;\n    return hook(name, namespace);\n  });\n}\n\nfunction removeHook(hook) {\n  const index = importHooks.indexOf(hook);\n\n  if (index > -1) {\n    importHooks.splice(index, 1);\n  }\n}\n\nfunction callHookFn(hookFn, namespace, name, baseDir) {\n  const newDefault = hookFn(namespace, name, baseDir);\n\n  if (newDefault && newDefault !== namespace) {\n    namespace.default = newDefault;\n  }\n}\n\nfunction Hook(modules, options, hookFn) {\n  if (this instanceof Hook === false) return new Hook(modules, options, hookFn);\n\n  if (typeof modules === 'function') {\n    hookFn = modules;\n    modules = null;\n    options = null;\n  } else if (typeof options === 'function') {\n    hookFn = options;\n    options = null;\n  }\n\n  const internals = options ? options.internals === true : false;\n\n  this._iitmHook = (name, namespace) => {\n    const filename = name;\n    const isBuiltin = name.startsWith('node:');\n    let baseDir;\n\n    if (isBuiltin) {\n      name = name.replace(/^node:/, '');\n    } else {\n      if (name.startsWith('file://')) {\n        try {\n          name = fileURLToPath(name);\n        } catch (e) {}\n      }\n\n      const details = parse(name);\n\n      if (details) {\n        name = details.name;\n        baseDir = details.basedir;\n      }\n    }\n\n    if (modules) {\n      for (const moduleName of modules) {\n        if (moduleName === name) {\n          if (baseDir) {\n            if (internals) {\n              name = name + path.sep + path.relative(baseDir, fileURLToPath(filename));\n            } else {\n              if (!baseDir.endsWith(specifiers.get(filename))) continue;\n            }\n          }\n\n          callHookFn(hookFn, namespace, name, baseDir);\n        }\n      }\n    } else {\n      callHookFn(hookFn, namespace, name, baseDir);\n    }\n  };\n\n  addHook(this._iitmHook);\n}\n\nHook.prototype.unhook = function () {\n  removeHook(this._iitmHook);\n};\n\nmodule.exports = Hook;\nmodule.exports.addHook = addHook;\nmodule.exports.removeHook = removeHook;","map":{"version":3,"names":["path","require","parse","fileURLToPath","importHooks","specifiers","toHook","addHook","hook","push","forEach","name","namespace","removeHook","index","indexOf","splice","callHookFn","hookFn","baseDir","newDefault","default","Hook","modules","options","internals","_iitmHook","filename","isBuiltin","startsWith","replace","e","details","basedir","moduleName","sep","relative","endsWith","get","prototype","unhook","module","exports"],"sources":["/Users/daniel.calderon/Projects/barkito/barkito_front/node_modules/import-in-the-middle/index.js"],"sourcesContent":["// Unless explicitly stated otherwise all files in this repository are licensed under the Apache 2.0 License.\n//\n// This product includes software developed at Datadog (https://www.datadoghq.com/). Copyright 2021 Datadog, Inc.\n\nconst path = require('path')\nconst parse = require('module-details-from-path')\nconst { fileURLToPath } = require('url')\n\nconst {\n  importHooks,\n  specifiers,\n  toHook\n} = require('./lib/register')\n\nfunction addHook(hook) {\n  importHooks.push(hook)\n  toHook.forEach(([name, namespace]) => hook(name, namespace))\n}\n\nfunction removeHook(hook) {\n  const index = importHooks.indexOf(hook)\n  if (index > -1) {\n    importHooks.splice(index, 1)\n  }\n}\n\nfunction callHookFn(hookFn, namespace, name, baseDir) {\n  const newDefault = hookFn(namespace, name, baseDir)\n  if (newDefault && newDefault !== namespace) {\n    namespace.default = newDefault\n  }\n}\n\nfunction Hook(modules, options, hookFn) {\n  if ((this instanceof Hook) === false) return new Hook(modules, options, hookFn)\n  if (typeof modules === 'function') {\n    hookFn = modules\n    modules = null\n    options = null\n  } else if (typeof options === 'function') {\n    hookFn = options\n    options = null\n  }\n  const internals = options ? options.internals === true : false\n\n  this._iitmHook = (name, namespace) => {\n    const filename = name\n    const isBuiltin = name.startsWith('node:')\n    let baseDir\n\n    if (isBuiltin) {\n      name = name.replace(/^node:/, '')\n    } else {\n      if (name.startsWith('file://')) {\n        try {\n          name = fileURLToPath(name)\n        } catch (e) {}\n      }\n      const details = parse(name)\n      if (details) {\n        name = details.name\n        baseDir = details.basedir\n      }\n    }\n\n    if (modules) {\n      for (const moduleName of modules) {\n        if (moduleName === name) {\n          if (baseDir) {\n            if (internals) {\n              name = name + path.sep + path.relative(baseDir, fileURLToPath(filename))\n            } else {\n              if (!baseDir.endsWith(specifiers.get(filename))) continue\n            }\n          }\n          callHookFn(hookFn, namespace, name, baseDir)\n        }\n      }\n    } else {\n      callHookFn(hookFn, namespace, name, baseDir)\n    }\n  }\n\n  addHook(this._iitmHook)\n}\n\nHook.prototype.unhook = function () {\n  removeHook(this._iitmHook)\n}\n\nmodule.exports = Hook\nmodule.exports.addHook = addHook\nmodule.exports.removeHook = removeHook\n"],"mappings":"AAAA;AACA;AACA;AAEA,MAAMA,IAAI,GAAGC,OAAO,CAAC,MAAD,CAApB;;AACA,MAAMC,KAAK,GAAGD,OAAO,CAAC,0BAAD,CAArB;;AACA,MAAM;EAAEE;AAAF,IAAoBF,OAAO,CAAC,KAAD,CAAjC;;AAEA,MAAM;EACJG,WADI;EAEJC,UAFI;EAGJC;AAHI,IAIFL,OAAO,CAAC,gBAAD,CAJX;;AAMA,SAASM,OAAT,CAAiBC,IAAjB,EAAuB;EACrBJ,WAAW,CAACK,IAAZ,CAAiBD,IAAjB;EACAF,MAAM,CAACI,OAAP,CAAe;IAAA,IAAC,CAACC,IAAD,EAAOC,SAAP,CAAD;IAAA,OAAuBJ,IAAI,CAACG,IAAD,EAAOC,SAAP,CAA3B;EAAA,CAAf;AACD;;AAED,SAASC,UAAT,CAAoBL,IAApB,EAA0B;EACxB,MAAMM,KAAK,GAAGV,WAAW,CAACW,OAAZ,CAAoBP,IAApB,CAAd;;EACA,IAAIM,KAAK,GAAG,CAAC,CAAb,EAAgB;IACdV,WAAW,CAACY,MAAZ,CAAmBF,KAAnB,EAA0B,CAA1B;EACD;AACF;;AAED,SAASG,UAAT,CAAoBC,MAApB,EAA4BN,SAA5B,EAAuCD,IAAvC,EAA6CQ,OAA7C,EAAsD;EACpD,MAAMC,UAAU,GAAGF,MAAM,CAACN,SAAD,EAAYD,IAAZ,EAAkBQ,OAAlB,CAAzB;;EACA,IAAIC,UAAU,IAAIA,UAAU,KAAKR,SAAjC,EAA4C;IAC1CA,SAAS,CAACS,OAAV,GAAoBD,UAApB;EACD;AACF;;AAED,SAASE,IAAT,CAAcC,OAAd,EAAuBC,OAAvB,EAAgCN,MAAhC,EAAwC;EACtC,IAAK,gBAAgBI,IAAjB,KAA2B,KAA/B,EAAsC,OAAO,IAAIA,IAAJ,CAASC,OAAT,EAAkBC,OAAlB,EAA2BN,MAA3B,CAAP;;EACtC,IAAI,OAAOK,OAAP,KAAmB,UAAvB,EAAmC;IACjCL,MAAM,GAAGK,OAAT;IACAA,OAAO,GAAG,IAAV;IACAC,OAAO,GAAG,IAAV;EACD,CAJD,MAIO,IAAI,OAAOA,OAAP,KAAmB,UAAvB,EAAmC;IACxCN,MAAM,GAAGM,OAAT;IACAA,OAAO,GAAG,IAAV;EACD;;EACD,MAAMC,SAAS,GAAGD,OAAO,GAAGA,OAAO,CAACC,SAAR,KAAsB,IAAzB,GAAgC,KAAzD;;EAEA,KAAKC,SAAL,GAAiB,CAACf,IAAD,EAAOC,SAAP,KAAqB;IACpC,MAAMe,QAAQ,GAAGhB,IAAjB;IACA,MAAMiB,SAAS,GAAGjB,IAAI,CAACkB,UAAL,CAAgB,OAAhB,CAAlB;IACA,IAAIV,OAAJ;;IAEA,IAAIS,SAAJ,EAAe;MACbjB,IAAI,GAAGA,IAAI,CAACmB,OAAL,CAAa,QAAb,EAAuB,EAAvB,CAAP;IACD,CAFD,MAEO;MACL,IAAInB,IAAI,CAACkB,UAAL,CAAgB,SAAhB,CAAJ,EAAgC;QAC9B,IAAI;UACFlB,IAAI,GAAGR,aAAa,CAACQ,IAAD,CAApB;QACD,CAFD,CAEE,OAAOoB,CAAP,EAAU,CAAE;MACf;;MACD,MAAMC,OAAO,GAAG9B,KAAK,CAACS,IAAD,CAArB;;MACA,IAAIqB,OAAJ,EAAa;QACXrB,IAAI,GAAGqB,OAAO,CAACrB,IAAf;QACAQ,OAAO,GAAGa,OAAO,CAACC,OAAlB;MACD;IACF;;IAED,IAAIV,OAAJ,EAAa;MACX,KAAK,MAAMW,UAAX,IAAyBX,OAAzB,EAAkC;QAChC,IAAIW,UAAU,KAAKvB,IAAnB,EAAyB;UACvB,IAAIQ,OAAJ,EAAa;YACX,IAAIM,SAAJ,EAAe;cACbd,IAAI,GAAGA,IAAI,GAAGX,IAAI,CAACmC,GAAZ,GAAkBnC,IAAI,CAACoC,QAAL,CAAcjB,OAAd,EAAuBhB,aAAa,CAACwB,QAAD,CAApC,CAAzB;YACD,CAFD,MAEO;cACL,IAAI,CAACR,OAAO,CAACkB,QAAR,CAAiBhC,UAAU,CAACiC,GAAX,CAAeX,QAAf,CAAjB,CAAL,EAAiD;YAClD;UACF;;UACDV,UAAU,CAACC,MAAD,EAASN,SAAT,EAAoBD,IAApB,EAA0BQ,OAA1B,CAAV;QACD;MACF;IACF,CAbD,MAaO;MACLF,UAAU,CAACC,MAAD,EAASN,SAAT,EAAoBD,IAApB,EAA0BQ,OAA1B,CAAV;IACD;EACF,CApCD;;EAsCAZ,OAAO,CAAC,KAAKmB,SAAN,CAAP;AACD;;AAEDJ,IAAI,CAACiB,SAAL,CAAeC,MAAf,GAAwB,YAAY;EAClC3B,UAAU,CAAC,KAAKa,SAAN,CAAV;AACD,CAFD;;AAIAe,MAAM,CAACC,OAAP,GAAiBpB,IAAjB;AACAmB,MAAM,CAACC,OAAP,CAAenC,OAAf,GAAyBA,OAAzB;AACAkC,MAAM,CAACC,OAAP,CAAe7B,UAAf,GAA4BA,UAA5B"},"metadata":{},"sourceType":"script"}