{"ast":null,"code":"'use strict';\n\nconst {\n  channel,\n  addHook\n} = require('./helpers/instrument');\n\nconst shimmer = require('../../datadog-shimmer');\n\naddHook({\n  name: 'bunyan',\n  versions: ['>=1']\n}, Logger => {\n  const logCh = channel('apm:bunyan:log');\n  shimmer.wrap(Logger.prototype, '_emit', emit => {\n    return function wrappedEmit(rec) {\n      if (logCh.hasSubscribers) {\n        const payload = {\n          message: rec\n        };\n        logCh.publish(payload);\n        arguments[0] = payload.message;\n      }\n\n      return emit.apply(this, arguments);\n    };\n  });\n  return Logger;\n});","map":{"version":3,"names":["channel","addHook","require","shimmer","name","versions","Logger","logCh","wrap","prototype","emit","wrappedEmit","rec","hasSubscribers","payload","message","publish","arguments","apply"],"sources":["/Users/daniel.calderon/Projects/barkito/barkito_front/node_modules/dd-trace/packages/datadog-instrumentations/src/bunyan.js"],"sourcesContent":["'use strict'\n\nconst {\n  channel,\n  addHook\n} = require('./helpers/instrument')\nconst shimmer = require('../../datadog-shimmer')\n\naddHook({ name: 'bunyan', versions: ['>=1'] }, Logger => {\n  const logCh = channel('apm:bunyan:log')\n  shimmer.wrap(Logger.prototype, '_emit', emit => {\n    return function wrappedEmit (rec) {\n      if (logCh.hasSubscribers) {\n        const payload = { message: rec }\n        logCh.publish(payload)\n        arguments[0] = payload.message\n      }\n      return emit.apply(this, arguments)\n    }\n  })\n  return Logger\n})\n"],"mappings":"AAAA;;AAEA,MAAM;EACJA,OADI;EAEJC;AAFI,IAGFC,OAAO,CAAC,sBAAD,CAHX;;AAIA,MAAMC,OAAO,GAAGD,OAAO,CAAC,uBAAD,CAAvB;;AAEAD,OAAO,CAAC;EAAEG,IAAI,EAAE,QAAR;EAAkBC,QAAQ,EAAE,CAAC,KAAD;AAA5B,CAAD,EAAwCC,MAAM,IAAI;EACvD,MAAMC,KAAK,GAAGP,OAAO,CAAC,gBAAD,CAArB;EACAG,OAAO,CAACK,IAAR,CAAaF,MAAM,CAACG,SAApB,EAA+B,OAA/B,EAAwCC,IAAI,IAAI;IAC9C,OAAO,SAASC,WAAT,CAAsBC,GAAtB,EAA2B;MAChC,IAAIL,KAAK,CAACM,cAAV,EAA0B;QACxB,MAAMC,OAAO,GAAG;UAAEC,OAAO,EAAEH;QAAX,CAAhB;QACAL,KAAK,CAACS,OAAN,CAAcF,OAAd;QACAG,SAAS,CAAC,CAAD,CAAT,GAAeH,OAAO,CAACC,OAAvB;MACD;;MACD,OAAOL,IAAI,CAACQ,KAAL,CAAW,IAAX,EAAiBD,SAAjB,CAAP;IACD,CAPD;EAQD,CATD;EAUA,OAAOX,MAAP;AACD,CAbM,CAAP"},"metadata":{},"sourceType":"script"}